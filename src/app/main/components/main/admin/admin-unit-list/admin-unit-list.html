<!-- Header: Button & Search -->
<div class="header-actions">
  <button class="btn btn-success" (click)="openFormModal()">
    <i class="bi bi-plus-lg me-1"></i> Add New Item
  </button>

  <div class="input-group search-box">
    <span class="input-group-text bg-light border-end-0">
      <i class="bi bi-search"></i>
    </span>
    <input type="text" class="form-control border-start-0" placeholder="Search unit..."
      [(ngModel)]="viewModel.searchTerm" (input)="applyFilter()">
  </div>
</div>

<!-- Table -->
<div class="table-responsive table-hover-wrapper">
  <table class="table table-striped table-hover align-middle">
    <thead class="table-light sticky-header">
      <tr>
        <th>#</th>
        <th (click)="sortData('name')">
          Name <i class="bi ms-2" [ngClass]="getSortIcon('name')"></i>
        </th>
       <th>Symbol</th>
        <th (click)="sortData('displayOrder')">
          Sequence <i class="bi ms-2" [ngClass]="getSortIcon('displayOrder')"></i>
        </th>

        <th (click)="sortData('multiplier')">
          Multiplier <i class="bi ms-2" [ngClass]="getSortIcon('multiplier')"></i>
        </th>
        <th>
          Is Base Unit
        </th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let unit of viewModel.filteredUnits; let i = index" class="table-row-hover">
        <td>{{ i + 1 }}</td>
        <td class="text-wrap text-break">{{ unit.name }}</td>
        <td class="text-wrap text-break" title="{{ unit.symbol }}">
          {{ unit.symbol}}
        </td>
        <td class="text-wrap text-break" title="{{ unit.displayOrder }}">
          {{ unit.displayOrder}}
        </td>
        <td class="text-wrap text-break" title="{{ unit.multiplier }}">
          {{ unit.multiplier}}
        </td>
        <td>
          <span class="badge" [ngClass]="unit.isBaseUnit === true ? 'bg-success' : 'bg-secondary'">
            {{ unit.isBaseUnit }}
          </span>
        </td>
        <td>
          <div class="d-flex gap-1 flex-wrap">
            <button class="btn btn-sm btn-primary" (click)="openFormModal(unit)">
              <i class="bi bi-pencil-fill"></i> Edit
            </button>
            <button class="btn btn-sm btn-danger" (click)="confirmDelete(unit.id!)">
              <i class="bi bi-trash-fill"></i> Delete
            </button>
          </div>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Empty State -->
  <div *ngIf="viewModel.filteredUnits.length === 0" class="empty-state">
    <i class="bi bi-folder-x"></i>
    <h4>No units found</h4>
    <p>Try adjusting your search or add a new unit</p>
  </div>

  <!-- Pagination -->
  <div class="pagination-container" *ngIf="viewModel.pagination && viewModel.pagination.totalCount > 0">
    <pagination (selectedPageNum)="loadPagedataWithPagination($event)" [viewModel]="viewModel.pagination">
    </pagination>
  </div>
</div>