<div class="container-fluid container-md my-3 my-md-4 px-2 px-md-3">
  <div class="row">
    <!-- PRODUCTS -->
    <section class="col-12">
      <!-- Header Section - Responsive -->
      <div class="shop-header mb-3">
        <!-- Title & Count -->
        <div class="shop-title-section mb-3 mb-md-0">
          <h5 class="mb-1 mb-md-0 shop-title">{{viewModel.PageTitle}}</h5>
          <div class="small text-muted">{{ viewModel.pagination.totalCount }} items</div>
        </div>

        <!-- Search & Filter Row -->
        <div class="shop-controls">
          <!-- Search -->
          <div class="shop-search">
            <input class="form-control form-control-sm" placeholder="ðŸ” Search products..."
              [(ngModel)]="viewModel.searchstring" (ngModelChange)="onSearchChange($event)"
              aria-label="Search products" />
          </div>

          <!-- Filter -->
          <div class="shop-filter">
            <select class="form-select form-select-sm" (change)="onSortChange($event)">
              <option value="">Filter</option>
              <option value="price_asc">Price: Low to High</option>
              <option value="price_desc">Price: High to Low</option>
              <option value="name_asc">Name: A â†’ Z</option>
              <option value="name_desc">Name: Z â†’ A</option>
            </select>
          </div>
        </div>
      </div>

      <!-- GRID -->
      <div class="products-grid">
        @if (viewModel.products && viewModel.products.length) {
          @for (p of viewModel.products; track trackByProduct($index, p)) {
            <div class="product-item-wrapper">
              <app-product class="product-item" [product]="p" (addToCart)="onAddToCart($event)"
                (view)="openProduct($event)" (wishlist)="onWishlistChanged($event)">
              </app-product>
            </div>
          }
        } @else {
          <div class="no-products text-center py-5">
            <i class="bi bi-inbox fs-1 text-muted d-block mb-3"></i>
            <p class="text-muted mb-0">No products match your filters.</p>
          </div>
        }
      </div>

      <!-- PAGINATION -->
      <nav class="pagination-wrapper mt-4" aria-label="Page navigation">
        <ul class="pagination justify-content-center flex-wrap">
          <li class="page-item" [class.disabled]="currentPage === 1">
            <a class="page-link" (click)="goToPage(currentPage - 1)" role="button"
              [attr.aria-disabled]="currentPage === 1 ? 'true' : 'false'">
              <i class="bi bi-chevron-left"></i> Prev
            </a>
          </li>

          <li class="page-item disabled">
            <span class="page-link">Page {{ currentPage }} / {{ totalPages }}</span>
          </li>

          <li class="page-item" [class.disabled]="currentPage >= totalPages">
            <a class="page-link" (click)="goToPage(currentPage + 1)" role="button"
              [attr.aria-disabled]="currentPage >= totalPages ? 'true' : 'false'">
              Next <i class="bi bi-chevron-right"></i>
            </a>
          </li>
        </ul>
      </nav>
    </section>
  </div>
</div>